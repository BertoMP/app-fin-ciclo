@if (isLoading) {
<section>
    <p>Registrando usuario...</p>
    <app-loading-spinner></app-loading-spinner>
</section>
} @else {
<form [formGroup]="registerForm" (ngSubmit)="onRegisterEspeciality()">
    <h2>Crear/Editar Especialidad</h2>
    <section class="form-first-row">
        <fieldset class="form-personal-data">
            <article class="name-field">
                <label for="name">Nombre</label>
                <input type="text" id="name" formControlName="nombre" [ngClass]="{'invalid':
                     registerForm.get('nombre').invalid && sendedAttempt }">
            </article>
            <article class="image-field">
                <label for="image">Imagen</label>
                <input type="file" formControlName="imagen" id="image" [ngClass]="{ 'invalid':
                 registerForm.get('imagen').invalid &&
                 sendedAttempt }" (change)="onFileSelect($event)">
                <img [src]="imageToShow" *ngIf="imageBase64" class="preview-image" alt="Patata" />
            </article>
            <article class="description-field">
                <label for="description">Descripción</label>
                <textarea formControlName="descripcion" id="description" [ngClass]="{ 'invalid':
                 registerForm.get('descripcion').invalid &&
                 sendedAttempt }"></textarea>
            </article>
        </fieldset>
        @if (registerForm.invalid && sendedAttempt) {
        <section class="error-message">
            <h3>Por favor, rellena todos los campos correctamente:</h3>
            <ul>
                @if (registerForm.get('nombre').invalid) {
                <li>
                    <strong>Nombre:</strong> Debe empezar por mayúscula y el resto de
                    letras en minúsculas, salvo en el caso de nombres compuestos.
                </li>
                }

                @if (registerForm.get('descripcion').invalid) {
                <li>
                    <strong>Descripción:</strong> Debe de tener una descripcion.
                </li>
                }

                @if (!imageBase64) {
                <li>
                    <strong>Imagen:</strong> Debe seleccionar una imagen.
                </li>
                }
            </ul>
        </section>
        } @else if (errores.length > 0) {
        <p class="error-message" *ngFor="let error of errores">{{ error }}</p>
        }
        <section class="btn-section">
            <button type="submit">Registrarse</button>
            <button type="button" class="btn-cancel" (click)="onCancel()">Cancelar</button>
        </section>
    </section>
</form>
}