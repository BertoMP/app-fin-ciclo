<section class="header">
  <h2>Especialidades</h2>
</section>
<section class="filter-buttons">
  <article class="filters">
    <article class="search-filter">
      <label for="search">Buscar</label>
      <input type="text" id="search" [(ngModel)]="search" (keyup)="updateFilters()">
    </article>
    <article class="per-page-filter">
      <label for="per-page">Items</label>
      <select2 id="per-page" [data]="perPageOptions" [value]="10" [(ngModel)]="perPage" (update)="updateFilters()"></select2>
    </article>
  </article>
  <article class="buttons">
    <button type="button" class="btn btn-primary" routerLink="../crear-especialidad">Crear especialidad</button>
  </article>
</section>
@if (!dataLoaded) {
  <app-loading-spinner></app-loading-spinner>
} @else if (!specialties.length) {
  <section class="no-results">
    <h3>No se encontraron resultados.</h3>
  </section>
} @else {
  <section class="specialties-table">
    <div class="info">
      <small>Mostrando {{ resultMin }} - {{ resultMax }} de {{ totalItems }} especialidades.</small>
    </div>
    <div class="table-container">
      <table>
        <thead>
        <tr>
          <th>Nombre</th>
          <th>Imagen</th>
          <th>Descripci√≥n</th>
          <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let specialty of (specialties | paginate: { id: 'specialtyListPagination', itemsPerPage: itemsPerPage, currentPage: actualPage, totalItems: totalItems })">
          <td>{{ specialty.datos_especialidad.nombre }}</td>
          <td>
            <img [src]="specialty.datos_especialidad.imagen" alt="Imagen de la especialidad">
          </td>
          <td [innerHTML]="sanitizeHtml(specialty.datos_especialidad.descripcion | removeBr)"></td>
          <td class="btn-container">
            <div class="dropdown">
              <button class="btn btn-link" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-three-dots-vertical"></i>
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <button class="dropdown-item edit-btn" type="button" routerLink="../editar-especialidad/{{specialty.id}}">
                  <i class="bi bi-pencil"></i> <span>Editar</span>
                </button>
                <button class="dropdown-item delete-btn" type="button" (click)="confirmarCancelacion(specialty.id)">
                  <i class="bi bi-trash3"></i> <span>Eliminar</span>
                </button>
              </div>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    @if (previousPageUrl || nextPageUrl) {
    <div class="pagination">
        <pagination-controls
          (pageChange)="actualPage = $event; changePage(actualPage)"
          id="specialtyListPagination"
          maxSize="5"
          directionLinks="true"
          previousLabel="Ant"
          nextLabel="Sig"
        ></pagination-controls>
    </div>
    }
  </section>
}
