@if (!dataLoaded) {
<div class="d-flex justify-content-center align-items-center vh-100">
    <app-loading-spinner></app-loading-spinner>
</div>
} @else if (!cita) {
<section class="no-results text-center mt-5">
    <p>No existe la cita indicada</p>
</section>
} @else {
<div class="container mt-5">
    <section class="header text-center mb-4">
        <h2>{{username}}, estos son los detalles de la cita seleccionada:</h2>
    </section>
    <div class="card shadow-lg mb-5 mx-auto">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Detalles de la Cita</h5>
        </div>
        <div class="card-body">
            <div class="mb-3">
                <strong>Fecha cita:</strong> {{ cita.datos_cita.fecha }} a las {{ cita.datos_cita.hora }}
            </div>
            <div class="mb-3">
                <strong>Paciente</strong> {{cita.datos_paciente.nombre}}
                {{cita.datos_paciente.primer_apellido}} {{cita.datos_paciente.segundo_apellido}}
            </div>
            <div class="mb-3">
                <strong>Especialista encargado:</strong> {{cita.datos_especialista.nombre}}
                {{cita.datos_especialista.primer_apellido}} {{cita.datos_especialista.segundo_apellido}}
            </div>
            <div class="mb-3">
                <strong>Especialidad:</strong> {{cita.datos_especialista.datos_especialidad.especialidad_nombre}}
            </div>
            <div class="mb-3">
                <strong>Consulta:</strong> {{cita.datos_especialista.datos_consulta.consulta_nombre}}
            </div>
            <div class="d-flex justify-content-between mt-4">
                <button type="button" routerLink="/listado-de-especialistas/{{cita.datos_especialista.especialista_id}}"
                    class="btn btn-primary">
                    Ver especialista
                </button>
                @if(cita.informe_id){
                <button type="button" routerLink="../../ver-informe/{{cita.informe_id}}" class="btn btn-primary">
                    Consultar Informe
                </button>
                } @else {
                <button type="button" class="btn btn-primary" (click)="downloadCita()">
                  <i class="bi bi-file-pdf-fill"></i> Descargar comprobante
                </button>
                }
            </div>
        </div>
    </div>
  <section>
    <button type="button" class="btn btn-primary" (click)="goBack()">Volver</button>
  </section>
</div>
}
